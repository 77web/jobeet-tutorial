

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Jobeet Day 8: The Forms &mdash; Jobeet 1.0.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../README.html" class="icon icon-home"> Jobeet
          

          
          </a>

          
            
            
              <div class="version">
                1.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">Jobeet Day 8: The Forms</a><ul>
<li><a class="reference internal" href="#create-the-job-form">Create the Job Form</a></li>
<li><a class="reference internal" href="#create-job-action">Create Job Action</a></li>
<li><a class="reference internal" href="#the-form-template">The Form Template</a></li>
<li><a class="reference internal" href="#form-processing">Form processing</a></li>
<li><a class="reference internal" href="#validation">Validation</a></li>
<li><a class="reference internal" href="#handling-file-uploads">Handling File Uploads</a></li>
<li><a class="reference internal" href="#protecting-the-job-form-with-a-token">Protecting the Job Form with a Token</a></li>
<li><a class="reference internal" href="#edit-job-action">Edit Job Action</a></li>
<li><a class="reference internal" href="#the-preview-page">The Preview Page</a></li>
<li><a class="reference internal" href="#delete-job-action">Delete Job Action</a></li>
<li><a class="reference internal" href="#publish-job-action">Publish Job Action</a></li>
<li><a class="reference internal" href="#additional-information">Additional information</a></li>
<li><a class="reference internal" href="#next-steps">Next Steps</a></li>
</ul>
</li>
</ul>
</div>
            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../README.html">Jobeet</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../README.html">Docs</a> &raquo;</li>
        
      <li>Jobeet Day 8: The Forms</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/days/day-8.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="jobeet-day-8-the-forms">
<span id="jobeet-day-8-the-forms"></span><h1>Jobeet Day 8: The Forms<a class="headerlink" href="#jobeet-day-8-the-forms" title="Permalink to this headline">¶</a></h1>
<p>Any website has forms, from the simple contact form to the complex ones with lots of fields.
Writing forms is also one of the most complex and tedious task for a web developer: you need to write the HTML form, implement validation
rules for each field, process the values to store them in a database, display error messages, repopulate fields in case of errors, and much more…</p>
<div class="section" id="create-the-job-form">
<span id="create-the-job-form"></span><h2>Create the Job Form<a class="headerlink" href="#create-the-job-form" title="Permalink to this headline">¶</a></h2>
<p>To deal with creation of jobs we will need forms, that in Symfony are realized by <a class="reference external" href="https://symfony.com/doc/4.1/components/form.html">Form Component</a>.
The Form component allows you to easily create, process and reuse forms.
We will crate a class that generally is <code class="docutils literal notranslate"><span class="pre">Form</span> <span class="pre">Builder</span></code> class. There we will define fields, that form should have, validation rules and many other things.
So, let’s create a folder <code class="docutils literal notranslate"><span class="pre">src/Form</span></code> where all forms will be placed and to create our first form in file <code class="docutils literal notranslate"><span class="pre">JobType.php</span></code>:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">namespace App\Form;</span>

<span class="x">use Symfony\Component\Form\AbstractType;</span>
<span class="x">use Symfony\Component\Form\FormBuilderInterface;</span>
<span class="x">use Symfony\Component\OptionsResolver\OptionsResolver;</span>

<span class="x">class JobType extends AbstractType</span>
<span class="x">{</span>
<span class="x">    /**</span>
<span class="x">     * {@inheritdoc}</span>
<span class="x">     */</span>
<span class="x">    public function buildForm(FormBuilderInterface $builder, array $options)</span>
<span class="x">    {</span>

<span class="x">    }</span>

<span class="x">    /**</span>
<span class="x">     * {@inheritdoc}</span>
<span class="x">     */</span>
<span class="x">    public function configureOptions(OptionsResolver $resolver)</span>
<span class="x">    {</span>

<span class="x">    }</span>
<span class="x">}</span>
</pre></div>
</div>
<p>As you can notice, our class extends <code class="docutils literal notranslate"><span class="pre">AbstractType</span></code> class and usually you will have to work with <code class="docutils literal notranslate"><span class="pre">buildForm</span></code> and <code class="docutils literal notranslate"><span class="pre">configureOptions</span></code> methods.
That’s why we defined them from the beginning.</p>
<p>Every form needs to know the name of the class that holds the underlying data.
Let’s specify the <code class="docutils literal notranslate"><span class="pre">data_class</span></code> option by changing <code class="docutils literal notranslate"><span class="pre">configureOptions</span></code> method:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">public function configureOptions(OptionsResolver $resolver)</span>
<span class="x">{</span>
<span class="x">    $resolver-&gt;setDefaults([</span>
<span class="x">        &#39;data_class&#39; =&gt; Job::class,</span>
<span class="x">    ]);</span>
<span class="x">}</span>
</pre></div>
</div>
<p><em>Note: don’t forget to import <code class="docutils literal notranslate"><span class="pre">Job</span></code> class</em></p>
<p>Now we should define form fields in <code class="docutils literal notranslate"><span class="pre">buildForm</span></code> method:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">// ....</span>
<span class="x">use Symfony\Component\Form\Extension\Core\Type\EmailType;</span>
<span class="x">use Symfony\Component\Form\Extension\Core\Type\TextType;</span>
<span class="x">use Symfony\Component\Form\Extension\Core\Type\TextareaType;</span>
<span class="x">use Symfony\Component\Form\Extension\Core\Type\UrlType;</span>

<span class="x">class JobType extends AbstractType</span>
<span class="x">{</span>
<span class="x">    /**</span>
<span class="x">     * {@inheritdoc}</span>
<span class="x">     */</span>
<span class="x">    public function buildForm(FormBuilderInterface $builder, array $options)</span>
<span class="x">    {</span>
<span class="x">        $builder</span>
<span class="x">            -&gt;add(&#39;type&#39;, TextType::class)</span>
<span class="x">            -&gt;add(&#39;company&#39;, TextType::class)</span>
<span class="x">            -&gt;add(&#39;logo&#39;, TextType::class)</span>
<span class="x">            -&gt;add(&#39;url&#39;, UrlType::class)</span>
<span class="x">            -&gt;add(&#39;position&#39;, TextType::class)</span>
<span class="x">            -&gt;add(&#39;location&#39;, TextType::class)</span>
<span class="x">            -&gt;add(&#39;description&#39;, TextareaType::class)</span>
<span class="x">            -&gt;add(&#39;howToApply&#39;, TextType::class)</span>
<span class="x">            -&gt;add(&#39;public&#39;, TextType::class)</span>
<span class="x">            -&gt;add(&#39;activated&#39;, TextType::class)</span>
<span class="x">            -&gt;add(&#39;email&#39;, EmailType::class)</span>
<span class="x">            -&gt;add(&#39;category&#39;, TextType::class)</span>
<span class="x">            -&gt;add(&#39;token&#39;, TextType::class);</span>
<span class="x">    }</span>
<span class="x">    </span>
<span class="x">    // ...   </span>
<span class="x">}</span>
</pre></div>
</div>
<p>We call method <code class="docutils literal notranslate"><span class="pre">add</span></code> on form builder and add all fields. First argument is field name. It should be the same as in entity.
The second argument is field type. In our case we used <a class="reference external" href="https://symfony.com/doc/4.1/reference/forms/types/text.html">TextType</a>, <a class="reference external" href="https://symfony.com/doc/4.1/reference/forms/types/email.html">EmailType</a> and <a class="reference external" href="https://symfony.com/doc/4.1/reference/forms/types/datetime.html">DateTimeType</a>. And 3rd parameter is options (we did not use it yet)
Field type affects rendering of field and also provides different options for configuration.</p>
<p>Example: <code class="docutils literal notranslate"><span class="pre">TextType</span></code> will be rendered as <code class="docutils literal notranslate"><span class="pre">&lt;input</span> <span class="pre">type=&quot;text&quot;</span> <span class="pre">...&gt;</span></code></p>
<p>Let’s try other types. For example, we defined <code class="docutils literal notranslate"><span class="pre">public</span></code> field as <code class="docutils literal notranslate"><span class="pre">TextType</span></code>, but in entity it is boolean.
It’s better to render it as selector with YES and NO options. We will implement <a class="reference external" href="https://symfony.com/doc/4.1/reference/forms/types/choice.html">ChoiceType</a>:</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="gd">- -&gt;add(&#39;public&#39;, TextType::class)</span>
<span class="gi">+ -&gt;add(&#39;public&#39;, ChoiceType::class, [</span>
<span class="gi">+     &#39;choices&#39;  =&gt; [</span>
<span class="gi">+         &#39;Yes&#39; =&gt; true,</span>
<span class="gi">+         &#39;No&#39; =&gt; false,</span>
<span class="gi">+     ],</span>
<span class="gi">+     &#39;label&#39; =&gt; &#39;Public?&#39;,</span>
<span class="gi">+ ])</span>
</pre></div>
</div>
<p>We changed type and also defined next options: <code class="docutils literal notranslate"><span class="pre">choices</span></code> - items, that will be used as <code class="docutils literal notranslate"><span class="pre">&lt;options&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">label</span></code>.
Do the same thing with <code class="docutils literal notranslate"><span class="pre">activated</span></code> field too.</p>
<p>Also <code class="docutils literal notranslate"><span class="pre">category</span></code> is <code class="docutils literal notranslate"><span class="pre">TextType</span></code>, but we have categories in DB and it would be good to render selector with these options.
It looks like it should be <code class="docutils literal notranslate"><span class="pre">ChoiceType</span></code>, but choice from entities is specific case and we have separate type for it: <a class="reference external" href="https://symfony.com/doc/4.1/reference/forms/types/entity.html">EntityType</a>.
It extends <code class="docutils literal notranslate"><span class="pre">ChoiceType</span></code> but with some additional options related to DB.</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="gd">- -&gt;add(&#39;category&#39;, TextType::class)</span>
<span class="gi">+ -&gt;add(&#39;category&#39;, EntityType::class, [</span>
<span class="gi">+     &#39;class&#39; =&gt; Category::class,</span>
<span class="gi">+     &#39;choice_label&#39; =&gt; &#39;name&#39;,</span>
<span class="gi">+ ])</span>
</pre></div>
</div>
<p>We specified <code class="docutils literal notranslate"><span class="pre">choice_label</span></code> to select a field from entity that will be shown as option in selector.
We changed only one line of code, but in template instead of simple input we will have select with all categories in options.</p>
<p>Now let’s change <code class="docutils literal notranslate"><span class="pre">type</span></code> field. For now it’s text field, but in the second day’s description we have next requirement:</p>
<blockquote>
<div>Type (full-time, part-time, or freelance)</div></blockquote>
<p>We need defined list of options and let’s do it in <code class="docutils literal notranslate"><span class="pre">Job</span></code> entity:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">class Job</span>
<span class="x">{</span>
<span class="x">    const FULL_TIME_TYPE = &#39;full-time&#39;;</span>
<span class="x">    const PART_TIME_TYPE = &#39;part-time&#39;;</span>
<span class="x">    const FREELANCE_TYPE = &#39;freelance&#39;;</span>

<span class="x">    const TYPES = [</span>
<span class="x">        self::FULL_TIME_TYPE,</span>
<span class="x">        self::PART_TIME_TYPE,</span>
<span class="x">        self::FREELANCE_TYPE,</span>
<span class="x">    ];</span>

<span class="x">    // ...</span>
<span class="x">}</span>
</pre></div>
</div>
<p>Currently we can change the form type of <code class="docutils literal notranslate"><span class="pre">type</span></code> field to <code class="docutils literal notranslate"><span class="pre">ChoiceType</span></code>:</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="gd">- -&gt;add(&#39;type&#39;, TextType::class)</span>
<span class="gi">+ -&gt;add(&#39;type&#39;, ChoiceType::class, [</span>
<span class="gi">+     &#39;choices&#39; =&gt; array_combine(Job::TYPES, Job::TYPES),</span>
<span class="gi">+     &#39;expanded&#39; =&gt; true,</span>
<span class="gi">+ ])</span>
</pre></div>
</div>
<p>Why we used <code class="docutils literal notranslate"><span class="pre">array_combine</span></code> but not directly <code class="docutils literal notranslate"><span class="pre">Job::TYPES</span></code>? We want to show options with same label and value.
For example, option with label <code class="docutils literal notranslate"><span class="pre">freelance</span></code> should have value <code class="docutils literal notranslate"><span class="pre">freelance</span></code> (<code class="docutils literal notranslate"><span class="pre">&lt;option</span> <span class="pre">value=&quot;freelance&quot;&gt;freelance&lt;/option&gt;</span></code>) and <code class="docutils literal notranslate"><span class="pre">array_combine</span></code> helps us to do that.
Also <code class="docutils literal notranslate"><span class="pre">expanded</span></code> is true to show you how different <code class="docutils literal notranslate"><span class="pre">ChoiceType</span></code> can be rendered. We will see it later.</p>
<p>Let’s add some labels and options. The final result should be:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">namespace App\Form;</span>

<span class="x">use App\Entity\Category;</span>
<span class="x">use App\Entity\Job;</span>
<span class="x">use Symfony\Bridge\Doctrine\Form\Type\EntityType;</span>
<span class="x">use Symfony\Component\Form\AbstractType;</span>
<span class="x">use Symfony\Component\Form\Extension\Core\Type\ChoiceType;</span>
<span class="x">use Symfony\Component\Form\Extension\Core\Type\EmailType;</span>
<span class="x">use Symfony\Component\Form\Extension\Core\Type\TextType;</span>
<span class="x">use Symfony\Component\Form\Extension\Core\Type\TextareaType;</span>
<span class="x">use Symfony\Component\Form\Extension\Core\Type\UrlType;</span>
<span class="x">use Symfony\Component\Form\FormBuilderInterface;</span>
<span class="x">use Symfony\Component\OptionsResolver\OptionsResolver;</span>

<span class="x">class JobType extends AbstractType</span>
<span class="x">{</span>
<span class="x">    /**</span>
<span class="x">     * {@inheritdoc}</span>
<span class="x">     */</span>
<span class="x">    public function buildForm(FormBuilderInterface $builder, array $options)</span>
<span class="x">    {</span>
<span class="x">        $builder</span>
<span class="x">            -&gt;add(&#39;type&#39;, ChoiceType::class, [</span>
<span class="x">                &#39;choices&#39; =&gt; array_combine(Job::TYPES, Job::TYPES),</span>
<span class="x">                &#39;expanded&#39; =&gt; true,</span>
<span class="x">            ])</span>
<span class="x">            -&gt;add(&#39;company&#39;, TextType::class)</span>
<span class="x">            -&gt;add(&#39;logo&#39;, TextType::class)</span>
<span class="x">            -&gt;add(&#39;url&#39;, UrlType::class)</span>
<span class="x">            -&gt;add(&#39;position&#39;, TextType::class)</span>
<span class="x">            -&gt;add(&#39;location&#39;, TextType::class)</span>
<span class="x">            -&gt;add(&#39;description&#39;, TextareaType::class)</span>
<span class="x">            -&gt;add(&#39;howToApply&#39;, TextType::class, [</span>
<span class="x">                &#39;label&#39; =&gt; &#39;How to apply?&#39;,</span>
<span class="x">            ])</span>
<span class="x">            -&gt;add(&#39;public&#39;, ChoiceType::class, [</span>
<span class="x">                &#39;choices&#39;  =&gt; [</span>
<span class="x">                    &#39;Yes&#39; =&gt; true,</span>
<span class="x">                    &#39;No&#39; =&gt; false,</span>
<span class="x">                ],</span>
<span class="x">                &#39;label&#39; =&gt; &#39;Public?&#39;,</span>
<span class="x">            ])</span>
<span class="x">            -&gt;add(&#39;activated&#39;, ChoiceType::class, [</span>
<span class="x">                &#39;choices&#39;  =&gt; [</span>
<span class="x">                    &#39;Yes&#39; =&gt; true,</span>
<span class="x">                    &#39;No&#39; =&gt; false,</span>
<span class="x">                ],</span>
<span class="x">            ])</span>
<span class="x">            -&gt;add(&#39;email&#39;, EmailType::class)</span>
<span class="x">            -&gt;add(&#39;category&#39;, EntityType::class, [</span>
<span class="x">                &#39;class&#39; =&gt; Category::class,</span>
<span class="x">                &#39;choice_label&#39; =&gt; &#39;name&#39;,</span>
<span class="x">            ])</span>
<span class="x">            -&gt;add(&#39;token&#39;, TextType::class);</span>
<span class="x">    }</span>

<span class="x">    /**</span>
<span class="x">     * {@inheritdoc}</span>
<span class="x">     */</span>
<span class="x">    public function configureOptions(OptionsResolver $resolver)</span>
<span class="x">    {</span>
<span class="x">        $resolver-&gt;setDefaults([</span>
<span class="x">            &#39;data_class&#39; =&gt; Job::class,</span>
<span class="x">        ]);</span>
<span class="x">    }</span>
<span class="x">}</span>
</pre></div>
</div>
</div>
<div class="section" id="create-job-action">
<span id="create-job-action"></span><h2>Create Job Action<a class="headerlink" href="#create-job-action" title="Permalink to this headline">¶</a></h2>
<p>We just created <code class="docutils literal notranslate"><span class="pre">JobType</span></code> form class. The next step is to create and render actual form.
In Symfony, this is done by building a form object and then rendering it in a template.
For now, we will create new action inside the <code class="docutils literal notranslate"><span class="pre">JobController</span></code> controller:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">// ...</span>
<span class="x">use App\Form\JobType;</span>

<span class="x">class JobController extends AbstractController</span>
<span class="x">{</span>
<span class="x">    // ...</span>
<span class="x">    </span>
<span class="x">    /**</span>
<span class="x">     * Creates a new job entity.</span>
<span class="x">     *</span>
<span class="x">     * @Route(&quot;/job/create&quot;, name=&quot;job.create&quot;)</span>
<span class="x">     * @Method({&quot;GET&quot;})</span>
<span class="x">     *</span>
<span class="x">     * @return Response</span>
<span class="x">     */</span>
<span class="x">    public function create() : Response</span>
<span class="x">    {</span>
<span class="x">        $job = new Job();</span>
<span class="x">        $form = $this-&gt;createForm(JobType::class, $job);</span>
<span class="x">    </span>
<span class="x">        return $this-&gt;render(&#39;job/create.html.twig&#39;, [</span>
<span class="x">            &#39;form&#39; =&gt; $form-&gt;createView(),</span>
<span class="x">        ]);</span>
<span class="x">    }</span>
<span class="x">}</span>
</pre></div>
</div>
<p>We created new Job object and passed it to <code class="docutils literal notranslate"><span class="pre">createForm</span></code> method along with <code class="docutils literal notranslate"><span class="pre">JobType</span></code> class.
This method will create a form class based on entity object and rules described in <code class="docutils literal notranslate"><span class="pre">JobType</span></code> class.
In form we will need a special form “view” object, that’s why we passed to template not the form, but the result of <code class="docutils literal notranslate"><span class="pre">createView</span></code> method.</p>
</div>
<div class="section" id="the-form-template">
<span id="the-form-template"></span><h2>The Form Template<a class="headerlink" href="#the-form-template" title="Permalink to this headline">¶</a></h2>
<p>In previous step we passed the data to <code class="docutils literal notranslate"><span class="pre">job/create.html.twig</span></code> template, but we don’t have it yet.
Let’s create it and use a set of form helper functions:</p>
<div class="highlight-twig notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">extends</span> <span class="s1">&#39;base.html.twig&#39;</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">body</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    &lt;h1&gt;Job creation&lt;/h1&gt;</span>

<span class="x">    </span><span class="cp">{{</span> <span class="nv">form_start</span><span class="o">(</span><span class="nv">form</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">        </span><span class="cp">{{</span> <span class="nv">form_widget</span><span class="o">(</span><span class="nv">form</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>

<span class="x">        &lt;div class=&quot;form-group&quot;&gt;</span>
<span class="x">            &lt;div class=&quot;col-sm-offset-2 col-sm-10&quot;&gt;</span>
<span class="x">                &lt;button type=&quot;submit&quot; class=&quot;btn btn-default&quot;&gt;Create&lt;/button&gt;</span>
<span class="x">            &lt;/div&gt;</span>
<span class="x">        &lt;/div&gt;</span>
<span class="x">    </span><span class="cp">{{</span> <span class="nv">form_end</span><span class="o">(</span><span class="nv">form</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</div>
<p>That’s it! Form will be rendered due to:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">form_start</span></code> - renders <code class="docutils literal notranslate"><span class="pre">&lt;form&gt;</span></code> tag with all needed attributed (method, encryption, etc).</li>
<li><code class="docutils literal notranslate"><span class="pre">form_widget</span></code> - renders all the fields, labels and any validation error messages.</li>
<li><code class="docutils literal notranslate"><span class="pre">form_end</span></code> - renders <code class="docutils literal notranslate"><span class="pre">&lt;/form&gt;</span></code> tag.</li>
</ul>
<p>Open the browser and access <code class="docutils literal notranslate"><span class="pre">/job/create</span></code> path to see how form is rendered.
The form with all fields are rendered, but the styling is not the same as in <a class="reference external" href="https://getbootstrap.com/docs/3.3/css/#forms">bootstrap</a>.
The good new is that <a class="reference external" href="https://github.com/symfony/twig-bridge/tree/v4.0.6">Twig Bridge</a> component, that is responsible for integration of Twig in Symfony, comes with some <a class="reference external" href="https://github.com/symfony/twig-bridge/tree/v4.0.6/Resources/views/Form">themes</a> out of the box.
We use bootstrap 3 and will choose <code class="docutils literal notranslate"><span class="pre">bootstrap_3_horizontal_layout.html.twig</span></code> theme file. Let’s setup it in <code class="docutils literal notranslate"><span class="pre">config/packages/twig.yaml</span></code>:</p>
<div class="highlight-twig notranslate"><div class="highlight"><pre><span></span><span class="x">twig:</span>
<span class="x">    # ...</span>
<span class="x">    form_themes:</span>
<span class="x">        - &#39;bootstrap_3_horizontal_layout.html.twig&#39;</span>
</pre></div>
</div>
<p>Refresh the page. Now form should look in bootstrap 3 style.</p>
<p>Also you can notice that we wrote html for submit button and did’t use <a class="reference external" href="https://symfony.com/doc/4.1/reference/forms/types/submit.html">SubmitType</a>.
It’s good practice because form become more reusable. Read more <a class="reference external" href="https://symfony.com/doc/4.1/best_practices/forms.html#form-button-configuration">here</a>.</p>
</div>
<div class="section" id="form-processing">
<span id="form-processing"></span><h2>Form processing<a class="headerlink" href="#form-processing" title="Permalink to this headline">¶</a></h2>
<p>Form is built and rendered. Processing is next.
If you submit the form, nothing will happen. Let’s fix it:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">class JobController extends AbstractController</span>
<span class="x">{</span>
<span class="x">    // ...</span>
<span class="x">    </span>
<span class="x">    /**</span>
<span class="x">     * Creates a new job entity.</span>
<span class="x">     *</span>
<span class="x">     * @Route(&quot;/job/create&quot;, name=&quot;job.create&quot;)</span>
<span class="x">     * @Method({&quot;GET&quot;, &quot;POST&quot;})</span>
<span class="x">     *</span>
<span class="x">     * @param Request $request</span>
<span class="x">     * @param EntityManagerInterface $em</span>
<span class="x">     *</span>
<span class="x">     * @return RedirectResponse|Response</span>
<span class="x">     */</span>
<span class="x">    public function create(Request $request, EntityManagerInterface $em) : Response</span>
<span class="x">    {</span>
<span class="x">        $job = new Job();</span>
<span class="x">        $form = $this-&gt;createForm(JobType::class, $job);</span>
<span class="x">        $form-&gt;handleRequest($request);</span>

<span class="x">        if ($form-&gt;isSubmitted() &amp;&amp; $form-&gt;isValid()) {</span>
<span class="x">            $em-&gt;persist($job);</span>
<span class="x">            $em-&gt;flush();</span>

<span class="x">            return $this-&gt;redirectToRoute(&#39;job.list&#39;);</span>
<span class="x">        }</span>

<span class="x">        return $this-&gt;render(&#39;job/create.html.twig&#39;, [</span>
<span class="x">            &#39;form&#39; =&gt; $form-&gt;createView(),</span>
<span class="x">        ]);</span>
<span class="x">    }</span>
</pre></div>
</div>
<ul class="simple">
<li>we added <code class="docutils literal notranslate"><span class="pre">POST</span></code> method to annotation, because form will be submitted with this method.</li>
<li>request object is added to method arguments because in request will be data of submitted form</li>
<li>entity manager is added to method arguments because we will use it to store new job</li>
<li><code class="docutils literal notranslate"><span class="pre">handleRequest</span></code> method maps request data to form</li>
<li><code class="docutils literal notranslate"><span class="pre">isSubmitted</span></code> method checks if form was submitted or method is called with get method and we need only to show the form</li>
<li><code class="docutils literal notranslate"><span class="pre">isValid</span></code> method tracks if all requirements are met (we will add them in next step)</li>
<li><code class="docutils literal notranslate"><span class="pre">redirectToRoute</span></code> is used to redirect to list of jobs and to prevent repeated submit of form (CTRL + R)</li>
</ul>
</div>
<div class="section" id="validation">
<span id="validation"></span><h2>Validation<a class="headerlink" href="#validation" title="Permalink to this headline">¶</a></h2>
<p>For now form is built, rendered and processed, but we don’t validate any information.
Form accepts anything. We should add some validation rules.</p>
<blockquote>
<div>Validation rules are called <code class="docutils literal notranslate"><span class="pre">constraints</span></code> in symfony forms.</div></blockquote>
<p>There are two places where constraints can be added: in annotations of entity or in form class.
We will choose the second option, to keep the logic of form validation in form class and not to enlarge entity class.</p>
<p>Our first field in form is <code class="docutils literal notranslate"><span class="pre">type</span></code> field. According to entity this field should be required:</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span> -&gt;add(&#39;type&#39;, ChoiceType::class, [
     &#39;choices&#39; =&gt; array_combine(Job::TYPES, Job::TYPES),
     &#39;expanded&#39; =&gt; true,
<span class="gi">+    &#39;constraints&#39; =&gt; [</span>
<span class="gi">+        new NotBlank(),</span>
<span class="gi">+    ]</span>
 ])
</pre></div>
</div>
<p>and import <code class="docutils literal notranslate"><span class="pre">Symfony\Component\Validator\Constraints\NotBlank</span></code> class.Next field is <code class="docutils literal notranslate"><span class="pre">company</span></code> and it’s required text field with a maximum length of 255 characters:</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span> -&gt;add(&#39;company&#39;, TextType::class, [
<span class="gi">+    &#39;constraints&#39; =&gt; [</span>
<span class="gi">+        new NotBlank(),</span>
<span class="gi">+        new Length([&#39;max&#39; =&gt; 255]),</span>
<span class="gi">+    ]</span>
 ])
</pre></div>
</div>
<p>Try to submit more than 255 characters and you will see error:</p>
<p><img alt="Validation error: max length" src="../_images/screenshot_9.png" /></p>
<p>Symfony has a big list of constraints out of the box. You can find all them <a class="reference external" href="https://symfony.com/doc/4.1/reference/constraints.html">here</a>.
Review all fields and add relevant constraints and in final you should see something similar:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">namespace App\Form;</span>

<span class="x">use App\Entity\Category;</span>
<span class="x">use App\Entity\Job;</span>
<span class="x">use Symfony\Bridge\Doctrine\Form\Type\EntityType;</span>
<span class="x">use Symfony\Component\Form\AbstractType;</span>
<span class="x">use Symfony\Component\Form\Extension\Core\Type\ChoiceType;</span>
<span class="x">use Symfony\Component\Form\Extension\Core\Type\EmailType;</span>
<span class="x">use Symfony\Component\Form\Extension\Core\Type\TextType;</span>
<span class="x">use Symfony\Component\Form\Extension\Core\Type\TextareaType;</span>
<span class="x">use Symfony\Component\Form\Extension\Core\Type\UrlType;</span>
<span class="x">use Symfony\Component\Form\FormBuilderInterface;</span>
<span class="x">use Symfony\Component\OptionsResolver\OptionsResolver;</span>
<span class="x">use Symfony\Component\Validator\Constraints\Email;</span>
<span class="x">use Symfony\Component\Validator\Constraints\Length;</span>
<span class="x">use Symfony\Component\Validator\Constraints\NotBlank;</span>
<span class="x">use Symfony\Component\Validator\Constraints\NotNull;</span>

<span class="x">class JobType extends AbstractType</span>
<span class="x">{</span>
<span class="x">    /**</span>
<span class="x">     * {@inheritdoc}</span>
<span class="x">     */</span>
<span class="x">    public function buildForm(FormBuilderInterface $builder, array $options)</span>
<span class="x">    {</span>
<span class="x">        $builder</span>
<span class="x">            -&gt;add(&#39;type&#39;, ChoiceType::class, [</span>
<span class="x">                &#39;choices&#39; =&gt; array_combine(Job::TYPES, Job::TYPES),</span>
<span class="x">                &#39;expanded&#39; =&gt; true,</span>
<span class="x">                &#39;constraints&#39; =&gt; [</span>
<span class="x">                    new NotBlank(),</span>
<span class="x">                ]</span>
<span class="x">            ])</span>
<span class="x">            -&gt;add(&#39;company&#39;, TextType::class, [</span>
<span class="x">                &#39;constraints&#39; =&gt; [</span>
<span class="x">                    new NotBlank(),</span>
<span class="x">                    new Length([&#39;max&#39; =&gt; 255]),</span>
<span class="x">                ]</span>
<span class="x">            ])</span>
<span class="x">            -&gt;add(&#39;logo&#39;, TextType::class)</span>
<span class="x">            -&gt;add(&#39;url&#39;, UrlType::class, [</span>
<span class="x">                &#39;required&#39; =&gt; false,</span>
<span class="x">                &#39;constraints&#39; =&gt; [</span>
<span class="x">                    new Length([&#39;max&#39; =&gt; 255]),</span>
<span class="x">                ]</span>
<span class="x">            ])</span>
<span class="x">            -&gt;add(&#39;position&#39;, TextType::class, [</span>
<span class="x">                &#39;constraints&#39; =&gt; [</span>
<span class="x">                    new NotBlank(),</span>
<span class="x">                    new Length([&#39;max&#39; =&gt; 255]),</span>
<span class="x">                ]</span>
<span class="x">            ])</span>
<span class="x">            -&gt;add(&#39;location&#39;, TextType::class, [</span>
<span class="x">                &#39;constraints&#39; =&gt; [</span>
<span class="x">                    new NotBlank(),</span>
<span class="x">                    new Length([&#39;max&#39; =&gt; 255]),</span>
<span class="x">                ]</span>
<span class="x">            ])</span>
<span class="x">            -&gt;add(&#39;description&#39;, TextareaType::class, [</span>
<span class="x">                &#39;constraints&#39; =&gt; [</span>
<span class="x">                    new NotBlank(),</span>
<span class="x">                ]</span>
<span class="x">            ])</span>
<span class="x">            -&gt;add(&#39;howToApply&#39;, TextType::class, [</span>
<span class="x">                &#39;label&#39; =&gt; &#39;How to apply?&#39;,</span>
<span class="x">                &#39;constraints&#39; =&gt; [</span>
<span class="x">                    new NotBlank(),</span>
<span class="x">                ]</span>
<span class="x">            ])</span>
<span class="x">            -&gt;add(&#39;public&#39;, ChoiceType::class, [</span>
<span class="x">                &#39;choices&#39;  =&gt; [</span>
<span class="x">                    &#39;Yes&#39; =&gt; true,</span>
<span class="x">                    &#39;No&#39; =&gt; false,</span>
<span class="x">                ],</span>
<span class="x">                &#39;label&#39; =&gt; &#39;Public?&#39;,</span>
<span class="x">                &#39;constraints&#39; =&gt; [</span>
<span class="x">                    new NotNull(),</span>
<span class="x">                ]</span>
<span class="x">            ])</span>
<span class="x">            -&gt;add(&#39;activated&#39;, ChoiceType::class, [</span>
<span class="x">                &#39;choices&#39;  =&gt; [</span>
<span class="x">                    &#39;Yes&#39; =&gt; true,</span>
<span class="x">                    &#39;No&#39; =&gt; false,</span>
<span class="x">                ],</span>
<span class="x">                &#39;constraints&#39; =&gt; [</span>
<span class="x">                    new NotNull(),</span>
<span class="x">                ]</span>
<span class="x">            ])</span>
<span class="x">            -&gt;add(&#39;email&#39;, EmailType::class, [</span>
<span class="x">                &#39;constraints&#39; =&gt; [</span>
<span class="x">                    new NotBlank(),</span>
<span class="x">                    new Email()</span>
<span class="x">                ]</span>
<span class="x">            ])</span>
<span class="x">            -&gt;add(&#39;category&#39;, EntityType::class, [</span>
<span class="x">                &#39;class&#39; =&gt; Category::class,</span>
<span class="x">                &#39;choice_label&#39; =&gt; &#39;name&#39;,</span>
<span class="x">                &#39;constraints&#39; =&gt; [</span>
<span class="x">                    new NotBlank(),</span>
<span class="x">                ]</span>
<span class="x">            ])</span>
<span class="x">            -&gt;add(&#39;token&#39;, TextType::class, [</span>
<span class="x">                &#39;constraints&#39; =&gt; [</span>
<span class="x">                    new NotBlank(),</span>
<span class="x">                    new Length([&#39;max&#39; =&gt; 255]),</span>
<span class="x">                ]</span>
<span class="x">            ]);</span>
<span class="x">    }</span>

<span class="x">    // ...</span>
<span class="x">}</span>
</pre></div>
</div>
<p>You can observe that we used <code class="docutils literal notranslate"><span class="pre">'required'</span> <span class="pre">=&gt;</span> <span class="pre">false</span></code> and <code class="docutils literal notranslate"><span class="pre">new</span> <span class="pre">NotBlank()</span></code> constraint. What is the difference?
By default, all fields have <code class="docutils literal notranslate"><span class="pre">required</span></code> set to true and this option affects only the rendering of the field: it adds <code class="docutils literal notranslate"><span class="pre">required</span></code> to html field tag:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;company&quot;</span> <span class="na">required</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>But this “requirement” can be easy bypassed by developer tools provided by every browser.<code class="docutils literal notranslate"><span class="pre">NotBlank</span></code> constraint checks on the level of form processing and can’t be bypassed.
If you want to test fully the power of constraints or simply want to disable browser validation add next parameter to <code class="docutils literal notranslate"><span class="pre">form_start</span></code> function in template:</p>
<div class="highlight-twig notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">form_start</span><span class="o">(</span><span class="nv">form</span><span class="o">,</span> <span class="o">{</span><span class="s1">&#39;attr&#39;</span><span class="o">:</span> <span class="o">{</span><span class="s1">&#39;novalidate&#39;</span><span class="o">:</span> <span class="s1">&#39;novalidate&#39;</span><span class="cp">}}</span><span class="x">) }}</span>
</pre></div>
</div>
<p>Also note that there are <code class="docutils literal notranslate"><span class="pre">NotNull</span></code> and <code class="docutils literal notranslate"><span class="pre">NotBlank</span></code> validations. With choices where are Yes/No answers is better to use <code class="docutils literal notranslate"><span class="pre">NotNull</span></code>, because <code class="docutils literal notranslate"><span class="pre">NotBlank</span></code> and false option will give validation error.</p>
</div>
<div class="section" id="handling-file-uploads">
<span id="handling-file-uploads"></span><h2>Handling File Uploads<a class="headerlink" href="#handling-file-uploads" title="Permalink to this headline">¶</a></h2>
<p>To handle the actual file upload in the form, we will need to change the logo field type to <code class="docutils literal notranslate"><span class="pre">FileType</span></code> in the form:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">-&gt;add(&#39;logo&#39;, FileType::class, [</span>
<span class="x">    &#39;required&#39; =&gt; false,</span>
<span class="x">])</span>
</pre></div>
</div>
<p>Also we need to add an <code class="docutils literal notranslate"><span class="pre">Image</span></code> constraint:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">-&gt;add(&#39;logo&#39;, FileType::class, [</span>
<span class="x">    &#39;required&#39; =&gt; false,</span>
<span class="x">    &#39;constraints&#39; =&gt; [</span>
<span class="x">        new Image(),</span>
<span class="x">    ]</span>
<span class="x">])</span>
</pre></div>
</div>
<p>When the form is submitted, the logo field will be an instance of <code class="docutils literal notranslate"><span class="pre">UploadedFile</span></code>.
It can be used to move the file to a permanent location. After this we will set the job logo property to the uploaded file name.</p>
<p>For this to work we need to add a new parameter, <code class="docutils literal notranslate"><span class="pre">jobs_directory</span></code>, in <code class="docutils literal notranslate"><span class="pre">config/services.yaml</span></code> file:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">parameters</span><span class="p p-Indicator">:</span>
    <span class="c1"># ...</span>
    <span class="l l-Scalar l-Scalar-Plain">jobs_directory</span><span class="p p-Indicator">:</span> <span class="s">&#39;%kernel.project_dir%/public/uploads/jobs&#39;</span>
</pre></div>
</div>
<p>And to add the processing logic in <code class="docutils literal notranslate"><span class="pre">JobController</span></code>:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">// ...</span>
<span class="x">use Symfony\Bundle\FrameworkBundle\Controller\Controller;</span>
<span class="x">use Symfony\Component\HttpFoundation\File\UploadedFile;</span>

<span class="x">class JobController extends Controller</span>
<span class="x">{</span>
<span class="x">    // ...</span>
<span class="x">    public function create(Request $request, EntityManagerInterface $em) : Response</span>
<span class="x">    {</span>
<span class="x">        // ...</span>

<span class="x">        if ($form-&gt;isSubmitted() &amp;&amp; $form-&gt;isValid()) {</span>
<span class="x">            /** @var UploadedFile|null $logoFile */</span>
<span class="x">            $logoFile = $form-&gt;get(&#39;logo&#39;)-&gt;getData();</span>

<span class="x">            if ($logoFile instanceof UploadedFile) {</span>
<span class="x">                $fileName = \bin2hex(\random_bytes(10)) . &#39;.&#39; . $file-&gt;guessExtension();</span>

<span class="x">                // moves the file to the directory where brochures are stored</span>
<span class="x">                $logoFile-&gt;move(</span>
<span class="x">                    $this-&gt;getParameter(&#39;jobs_directory&#39;),</span>
<span class="x">                    $fileName</span>
<span class="x">                );</span>

<span class="x">                $job-&gt;setLogo($fileName);</span>
<span class="x">            }</span>

<span class="x">            $em-&gt;persist($job);</span>
<span class="x">            $em-&gt;flush();</span>

<span class="x">            return $this-&gt;redirectToRoute(&#39;job.list&#39;);</span>
<span class="x">        }</span>

<span class="x">        // ...</span>
<span class="x">    }</span>
<span class="x">}</span>
</pre></div>
</div>
<p>Notice that now <code class="docutils literal notranslate"><span class="pre">JobController</span></code> extends <code class="docutils literal notranslate"><span class="pre">Controller</span></code> and not <code class="docutils literal notranslate"><span class="pre">AbstractController</span></code> because we need <code class="docutils literal notranslate"><span class="pre">getParameter</span></code> method.</p>
<p>Even if this implementation works, let’s do this in a better way, moving logic to service and using Doctrine lifecycle callbacks.</p>
<p>To create a service, first create a new <code class="docutils literal notranslate"><span class="pre">FileUploader</span></code> class in <code class="docutils literal notranslate"><span class="pre">src/Service</span></code> folder:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">namespace App\Service;</span>

<span class="x">use Symfony\Component\HttpFoundation\File\UploadedFile;</span>

<span class="x">class FileUploader</span>
<span class="x">{</span>
<span class="x">    /** @var string */</span>
<span class="x">    private $targetDirectory;</span>

<span class="x">    /**</span>
<span class="x">     * @param string $targetDirectory</span>
<span class="x">     */</span>
<span class="x">    public function __construct(string $targetDirectory)</span>
<span class="x">    {</span>
<span class="x">        $this-&gt;targetDirectory = $targetDirectory;</span>
<span class="x">    }</span>
<span class="x">    </span>
<span class="x">    /**</span>
<span class="x">     * @return string</span>
<span class="x">     */</span>
<span class="x">    public function getTargetDirectory(): string</span>
<span class="x">    {</span>
<span class="x">        return $this-&gt;targetDirectory;</span>
<span class="x">    }</span>

<span class="x">    /**</span>
<span class="x">     * @param UploadedFile $file</span>
<span class="x">     *</span>
<span class="x">     * @return string</span>
<span class="x">     */</span>
<span class="x">    public function upload(UploadedFile $file) : string</span>
<span class="x">    {</span>
<span class="x">        $fileName = md5(uniqid()) . &#39;.&#39; . $file-&gt;guessExtension();</span>

<span class="x">        $file-&gt;move($this-&gt;targetDirectory, $fileName);</span>

<span class="x">        return $fileName;</span>
<span class="x">    }</span>
<span class="x">}</span>
</pre></div>
</div>
<p>Then, define a service for this class in <code class="docutils literal notranslate"><span class="pre">config/services.yaml</span></code>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># ...</span>

<span class="l l-Scalar l-Scalar-Plain">services</span><span class="p p-Indicator">:</span>
    <span class="c1"># ...</span>

    <span class="l l-Scalar l-Scalar-Plain">App\Service\FileUploader</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">arguments</span><span class="p p-Indicator">:</span>
            <span class="l l-Scalar l-Scalar-Plain">$targetDirectory</span><span class="p p-Indicator">:</span> <span class="s">&#39;%jobs_directory%&#39;</span>
</pre></div>
</div>
<p>Now you’re ready to use this service in the controller:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">// ...</span>
<span class="x">use App\Service\FileUploader;</span>

<span class="x">class JobController extends AbstractController</span>
<span class="x">{</span>
<span class="x">    // ...</span>
<span class="x">    public function create(Request $request, EntityManagerInterface $em, FileUploader $fileUploader) : Response</span>
<span class="x">    {</span>
<span class="x">        // ...</span>

<span class="x">        if ($form-&gt;isSubmitted() &amp;&amp; $form-&gt;isValid()) {</span>
<span class="x">            /** @var UploadedFile|null $logoFile */</span>
<span class="x">            $logoFile = $form-&gt;get(&#39;logo&#39;)-&gt;getData();</span>

<span class="x">            if ($logoFile instanceof UploadedFile) {</span>
<span class="x">                $fileName = $fileUploader-&gt;upload($logoFile);</span>

<span class="x">                $job-&gt;setLogo($fileName);</span>
<span class="x">            }</span>

<span class="x">            $em-&gt;persist($job);</span>
<span class="x">            $em-&gt;flush();</span>

<span class="x">            return $this-&gt;redirectToRoute(&#39;job.list&#39;);</span>
<span class="x">        }</span>

<span class="x">        // ...</span>
<span class="x">    }</span>
<span class="x">}</span>
</pre></div>
</div>
<p>Now create a <a class="reference external" href="https://symfony.com/doc/4.1/doctrine/event_listeners_subscribers.html">Doctrine listener</a> to automatically upload the file when persisting the entity (<code class="docutils literal notranslate"><span class="pre">src/EventListener/JobUploadListener.php</span></code>):</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">namespace App\EventListener;</span>

<span class="x">use App\Entity\Job;</span>
<span class="x">use App\Service\FileUploader;</span>
<span class="x">use Symfony\Component\HttpFoundation\File\UploadedFile;</span>
<span class="x">use Doctrine\ORM\Event\LifecycleEventArgs;</span>
<span class="x">use Doctrine\ORM\Event\PreUpdateEventArgs;</span>

<span class="x">class JobUploadListener</span>
<span class="x">{</span>
<span class="x">    /** @var FileUploader */</span>
<span class="x">    private $uploader;</span>

<span class="x">    /**</span>
<span class="x">     * @param FileUploader $uploader</span>
<span class="x">     */</span>
<span class="x">    public function __construct(FileUploader $uploader)</span>
<span class="x">    {</span>
<span class="x">        $this-&gt;uploader = $uploader;</span>
<span class="x">    }</span>

<span class="x">    /**</span>
<span class="x">     * @param LifecycleEventArgs $args</span>
<span class="x">     */</span>
<span class="x">    public function prePersist(LifecycleEventArgs $args)</span>
<span class="x">    {</span>
<span class="x">        $entity = $args-&gt;getEntity();</span>

<span class="x">        $this-&gt;uploadFile($entity);</span>
<span class="x">    }</span>

<span class="x">    /**</span>
<span class="x">     * @param PreUpdateEventArgs $args</span>
<span class="x">     */</span>
<span class="x">    public function preUpdate(PreUpdateEventArgs $args)</span>
<span class="x">    {</span>
<span class="x">        $entity = $args-&gt;getEntity();</span>

<span class="x">        $this-&gt;uploadFile($entity);</span>
<span class="x">    }</span>

<span class="x">    /**</span>
<span class="x">     * @param $entity</span>
<span class="x">     */</span>
<span class="x">    private function uploadFile($entity)</span>
<span class="x">    {</span>
<span class="x">        // upload only works for Job entities</span>
<span class="x">        if (!$entity instanceof Job) {</span>
<span class="x">            return;</span>
<span class="x">        }</span>

<span class="x">        $logoFile = $entity-&gt;getLogo();</span>

<span class="x">        // only upload new files</span>
<span class="x">        if ($logoFile instanceof UploadedFile) {</span>
<span class="x">            $fileName = $this-&gt;uploader-&gt;upload($logoFile);</span>

<span class="x">            $entity-&gt;setLogo($fileName);</span>
<span class="x">        }</span>
<span class="x">    }</span>
<span class="x">}</span>
</pre></div>
</div>
<p>Next, register this class as a Doctrine listener in <code class="docutils literal notranslate"><span class="pre">config/services.yaml</span></code>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># ...</span>

<span class="l l-Scalar l-Scalar-Plain">services</span><span class="p p-Indicator">:</span>
    <span class="c1"># ...</span>

    <span class="l l-Scalar l-Scalar-Plain">App\EventListener\JobUploadListener</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">tags</span><span class="p p-Indicator">:</span>
            <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span> <span class="nv">name</span><span class="p p-Indicator">:</span> <span class="nv">doctrine.event_listener</span><span class="p p-Indicator">,</span> <span class="nv">event</span><span class="p p-Indicator">:</span> <span class="nv">prePersist</span> <span class="p p-Indicator">}</span>
            <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span> <span class="nv">name</span><span class="p p-Indicator">:</span> <span class="nv">doctrine.event_listener</span><span class="p p-Indicator">,</span> <span class="nv">event</span><span class="p p-Indicator">:</span> <span class="nv">preUpdate</span> <span class="p p-Indicator">}</span>
</pre></div>
</div>
<p>This listener is now automatically executed when persisting a new Job entity.
This way, you can remove everything related to uploading from the controller.</p>
<p>Note that this will not work, until methods <code class="docutils literal notranslate"><span class="pre">setLogo</span></code> and <code class="docutils literal notranslate"><span class="pre">getLogo</span></code> from <code class="docutils literal notranslate"><span class="pre">Job</span></code> entity are forced to work with string.
Remove this constraint and it will work:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">/**</span>
<span class="x"> * @return string|null|UploadedFile</span>
<span class="x"> */</span>
<span class="x">public function getLogo()</span>
<span class="x">{</span>
<span class="x">    return $this-&gt;logo;</span>
<span class="x">}</span>

<span class="x">/**</span>
<span class="x"> * @param string|null|UploadedFile $logo</span>
<span class="x"> *</span>
<span class="x"> * @return self</span>
<span class="x"> */</span>
<span class="x">public function setLogo($logo) : self</span>
<span class="x">{</span>
<span class="x">    $this-&gt;logo = $logo;</span>

<span class="x">    return $this;</span>
<span class="x">}</span>
</pre></div>
</div>
<p>We uploaded a file and should show it. Add parameter variable in <code class="docutils literal notranslate"><span class="pre">config/services.yaml</span></code> that will be used to find a path to image:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">parameters</span><span class="p p-Indicator">:</span>
    <span class="c1"># ...</span>
    <span class="l l-Scalar l-Scalar-Plain">jobs_web_directory</span><span class="p p-Indicator">:</span> <span class="s">&#39;/uploads/jobs&#39;</span>
</pre></div>
</div>
<p>mark it as global twig variable in <code class="docutils literal notranslate"><span class="pre">config/packages/twig.yaml</span></code>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">twig</span><span class="p p-Indicator">:</span>
    <span class="c1"># ...</span>
    <span class="l l-Scalar l-Scalar-Plain">globals</span><span class="p p-Indicator">:</span>
        <span class="c1"># ...</span>
        <span class="l l-Scalar l-Scalar-Plain">jobs_web_directory</span><span class="p p-Indicator">:</span> <span class="s">&#39;%jobs_web_directory%&#39;</span>
</pre></div>
</div>
<p>and image block in <code class="docutils literal notranslate"><span class="pre">templates/job/show.html.twig</span></code>:</p>
<div class="highlight-twig notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">extends</span> <span class="s1">&#39;base.html.twig&#39;</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">body</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    &lt;h1&gt;Job&lt;/h1&gt;</span>

<span class="x">    &lt;div class=&quot;media&quot; style=&quot;margin-top: 60px;&quot;&gt;</span>
<span class="x">        </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">job.logo</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">            &lt;div class=&quot;media-left&quot;&gt;</span>
<span class="x">                &lt;a href=&quot;</span><span class="cp">{{</span> <span class="nv">job.url</span> <span class="cp">}}</span><span class="x">&quot; target=&quot;_blank&quot;&gt;</span>
<span class="x">                    &lt;img class=&quot;media-object&quot; style=&quot;width:100px; height:100px;&quot; src=&quot;</span><span class="cp">{{</span> <span class="nv">asset</span><span class="o">(</span><span class="nv">jobs_web_directory</span> <span class="o">~</span> <span class="s1">&#39;/&#39;</span> <span class="o">~</span> <span class="nv">job.logo.filename</span><span class="o">)</span> <span class="cp">}}</span><span class="x">&quot;&gt;</span>
<span class="x">                &lt;/a&gt;</span>
<span class="x">            &lt;/div&gt;</span>
<span class="x">        </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">        </span>
<span class="x">        </span><span class="c">{# ... #}</span><span class="x"></span>
</pre></div>
</div>
</div>
<div class="section" id="protecting-the-job-form-with-a-token">
<span id="protecting-the-job-form-with-a-token"></span><h2>Protecting the Job Form with a Token<a class="headerlink" href="#protecting-the-job-form-with-a-token" title="Permalink to this headline">¶</a></h2>
<p>Everything must work fine by now. As of now, the user must enter the token for the job.
But the job token must be generated automatically when a new job is created, as we don’t want to rely on the user to provide a unique token.</p>
<p>Create a new listener <code class="docutils literal notranslate"><span class="pre">JobTokenListener.php</span></code> in <code class="docutils literal notranslate"><span class="pre">src/EventListener</span></code> folder to add the logic that generates the token before a new job is saved:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">namespace App\EventListener;</span>

<span class="x">use App\Entity\Job;</span>
<span class="x">use Doctrine\ORM\Event\LifecycleEventArgs;</span>

<span class="x">class JobTokenListener</span>
<span class="x">{</span>
<span class="x">    /**</span>
<span class="x">     * @param LifecycleEventArgs $args</span>
<span class="x">     */</span>
<span class="x">    public function prePersist(LifecycleEventArgs $args)</span>
<span class="x">    {</span>
<span class="x">        $entity = $args-&gt;getEntity();</span>

<span class="x">        if (!$entity instanceof Job) {</span>
<span class="x">            return;</span>
<span class="x">        }</span>

<span class="x">        if (!$entity-&gt;getToken()) {</span>
<span class="x">            $entity-&gt;setToken(\bin2hex(\random_bytes(10)));</span>
<span class="x">        }</span>
<span class="x">    }</span>
<span class="x">}</span>
</pre></div>
</div>
<p>define it in <code class="docutils literal notranslate"><span class="pre">config/services.yaml</span></code>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1">#...</span>

<span class="l l-Scalar l-Scalar-Plain">services</span><span class="p p-Indicator">:</span>
    <span class="c1"># ...</span>

    <span class="l l-Scalar l-Scalar-Plain">App\EventListener\JobTokenListener</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">tags</span><span class="p p-Indicator">:</span>
            <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span> <span class="nv">name</span><span class="p p-Indicator">:</span> <span class="nv">doctrine.event_listener</span><span class="p p-Indicator">,</span> <span class="nv">event</span><span class="p p-Indicator">:</span> <span class="nv">prePersist</span> <span class="p p-Indicator">}</span>
</pre></div>
</div>
<p>Now you can remove the token field from the form by deleting the <code class="docutils literal notranslate"><span class="pre">add(‘token’)</span></code> line.</p>
</div>
<div class="section" id="edit-job-action">
<span id="edit-job-action"></span><h2>Edit Job Action<a class="headerlink" href="#edit-job-action" title="Permalink to this headline">¶</a></h2>
<p>If you remember the user stories from day 2, a job can be edited only if the user knows the associated token.
Take it in consideration and create new action in <code class="docutils literal notranslate"><span class="pre">JobController</span></code>:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">// ...</span>

<span class="x">class JobController extends Controller</span>
<span class="x">{</span>
<span class="x">    // ...</span>

<span class="x">    /**</span>
<span class="x">     * Edit existing job entity</span>
<span class="x">     *</span>
<span class="x">     * @Route(&quot;/job/{token}/edit&quot;, name=&quot;job.edit&quot;, requirements={&quot;token&quot; = &quot;\w+&quot;})</span>
<span class="x">     * @Method({&quot;GET&quot;, &quot;POST&quot;})</span>
<span class="x">     *</span>
<span class="x">     * @param Request $request</span>
<span class="x">     * @param Job $job</span>
<span class="x">     * @param EntityManagerInterface $em</span>
<span class="x">     *</span>
<span class="x">     * @return Response</span>
<span class="x">     */</span>
<span class="x">    public function edit(Request $request, Job $job, EntityManagerInterface $em) : Response</span>
<span class="x">    {</span>
<span class="x">        $form = $this-&gt;createForm(JobType::class, $job);</span>
<span class="x">        $form-&gt;handleRequest($request);</span>

<span class="x">        if ($form-&gt;isSubmitted() &amp;&amp; $form-&gt;isValid()) {</span>
<span class="x">            $em-&gt;flush();</span>

<span class="x">            return $this-&gt;redirectToRoute(&#39;job.list&#39;);</span>
<span class="x">        }</span>

<span class="x">        return $this-&gt;render(&#39;job/edit.html.twig&#39;, [</span>
<span class="x">            &#39;form&#39; =&gt; $form-&gt;createView(),</span>
<span class="x">        ]);</span>
<span class="x">    }</span>
<span class="x">}</span>
</pre></div>
</div>
<p>This action is very similar to create action but there are:</p>
<ul class="simple">
<li>another path and name of the route</li>
<li>job object is pre-populated to the method</li>
<li>we build form based on this job object, but not new one</li>
<li>another template</li>
<li>we do not call <code class="docutils literal notranslate"><span class="pre">persist</span></code>, because job object was already persisted</li>
</ul>
<p>Next step is to create template that we called in action:</p>
<div class="highlight-twig notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">extends</span> <span class="s1">&#39;base.html.twig&#39;</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">body</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    &lt;h1&gt;Job edit&lt;/h1&gt;</span>

<span class="x">    </span><span class="cp">{{</span> <span class="nv">form_start</span><span class="o">(</span><span class="nv">form</span><span class="o">,</span> <span class="o">{</span><span class="s1">&#39;attr&#39;</span><span class="o">:</span> <span class="o">{</span><span class="s1">&#39;novalidate&#39;</span><span class="o">:</span> <span class="s1">&#39;novalidate&#39;</span><span class="cp">}}</span><span class="x">) }}</span>
<span class="x">        </span><span class="cp">{{</span> <span class="nv">form_widget</span><span class="o">(</span><span class="nv">form</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>

<span class="x">        &lt;div class=&quot;form-group&quot;&gt;</span>
<span class="x">            &lt;div class=&quot;col-sm-offset-2 col-sm-10&quot;&gt;</span>
<span class="x">                &lt;button type=&quot;submit&quot; class=&quot;btn btn-default&quot;&gt;Edit&lt;/button&gt;</span>
<span class="x">            &lt;/div&gt;</span>
<span class="x">        &lt;/div&gt;</span>
<span class="x">    </span><span class="cp">{{</span> <span class="nv">form_end</span><span class="o">(</span><span class="nv">form</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</div>
<p>Now add a link to this page in <code class="docutils literal notranslate"><span class="pre">templates/job/show.html.twig</span></code> template:</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="gd">- &lt;a class=&quot;btn btn-primary&quot; href=&quot;#&quot;&gt;</span>
<span class="gi">+ &lt;a class=&quot;btn btn-primary&quot; href=&quot;{{ path(&#39;job.edit&#39;, {token: job.token}) }}&quot;&gt;</span>
      &lt;span class=&quot;glyphicon glyphicon-pencil&quot; aria-hidden=&quot;true&quot;&gt;&lt;/span&gt;
      Edit
  &lt;/a&gt;
</pre></div>
</div>
<p>If you will try to access this page now, probably you will get an error, because <code class="docutils literal notranslate"><span class="pre">logo</span></code> field is string, but form works with <code class="docutils literal notranslate"><span class="pre">File</span></code> object.
We can fix it by listening <code class="docutils literal notranslate"><span class="pre">post</span> <span class="pre">loading</span></code> event and replacing string by expected object:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">// ...</span>
<span class="x">use Symfony\Component\HttpFoundation\File\File;</span>

<span class="x">class JobUploadListener</span>
<span class="x">{</span>
<span class="x">    // ...</span>
<span class="x">    </span>
<span class="x">    /**</span>
<span class="x">     * @param PreUpdateEventArgs $args</span>
<span class="x">     */</span>
<span class="x">    public function preUpdate(PreUpdateEventArgs $args)</span>
<span class="x">    {</span>
<span class="x">        $entity = $args-&gt;getEntity();</span>

<span class="x">        $this-&gt;uploadFile($entity);</span>
<span class="x">        $this-&gt;fileToString($entity);</span>
<span class="x">    }</span>

<span class="x">    /**</span>
<span class="x">     * @param LifecycleEventArgs $args</span>
<span class="x">     */</span>
<span class="x">    public function postLoad(LifecycleEventArgs $args)</span>
<span class="x">    {</span>
<span class="x">        $entity = $args-&gt;getEntity();</span>

<span class="x">        $this-&gt;stringToFile($entity);</span>
<span class="x">    }</span>
<span class="x">    </span>
<span class="x">    /**</span>
<span class="x">     * @param $entity</span>
<span class="x">     */</span>
<span class="x">    private function stringToFile($entity)</span>
<span class="x">    {</span>
<span class="x">        if (!$entity instanceof Job) {</span>
<span class="x">            return;</span>
<span class="x">        }</span>

<span class="x">        if ($fileName = $entity-&gt;getLogo()) {</span>
<span class="x">            $entity-&gt;setLogo(new File($this-&gt;uploader-&gt;getTargetDirectory() . &#39;/&#39; . $fileName));</span>
<span class="x">        }</span>
<span class="x">    }</span>
<span class="x">    </span>
<span class="x">    /**</span>
<span class="x">     * @param $entity</span>
<span class="x">     */</span>
<span class="x">    private function fileToString($entity)</span>
<span class="x">    {</span>
<span class="x">        if (!$entity instanceof Job) {</span>
<span class="x">            return;</span>
<span class="x">        }</span>

<span class="x">        $logoFile = $entity-&gt;getLogo();</span>
<span class="x">        </span>
<span class="x">        if ($logoFile instanceof File) {</span>
<span class="x">            $entity-&gt;setLogo($logoFile-&gt;getFilename());</span>
<span class="x">        }</span>
<span class="x">    }</span>
<span class="x">}</span>
</pre></div>
</div>
<p>add define this method in <code class="docutils literal notranslate"><span class="pre">config/services.yaml</span></code>:</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span># ...

services:
    # ...

    App\EventListener\JobUploadListener:
        tags:
            - { name: doctrine.event_listener, event: prePersist }
            - { name: doctrine.event_listener, event: preUpdate }
<span class="gi">+           - { name: doctrine.event_listener, event: postLoad }</span>
</pre></div>
</div>
<p>Now it should work!</p>
</div>
<div class="section" id="the-preview-page">
<span id="the-preview-page"></span><h2>The Preview Page<a class="headerlink" href="#the-preview-page" title="Permalink to this headline">¶</a></h2>
<p>The preview page is the same as the job page display. The only difference is that the job preview page will be accessed using the job token instead of the job id:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">// ...</span>

<span class="x">class JobController extends AbstractController</span>
<span class="x">{</span>
<span class="x">    // ...</span>

<span class="x">    /**</span>
<span class="x">     * Finds and displays the preview page for a job entity.</span>
<span class="x">     *</span>
<span class="x">     * @Route(&quot;job/{token}&quot;, name=&quot;job.preview&quot;, requirements={&quot;token&quot; = &quot;\w+&quot;})</span>
<span class="x">     * @Method(&quot;GET&quot;)</span>
<span class="x">     *</span>
<span class="x">     * @param Job $job</span>
<span class="x">     *</span>
<span class="x">     * @return Response</span>
<span class="x">     */</span>
<span class="x">    public function preview(Job $job) : Response</span>
<span class="x">    {</span>
<span class="x">        return $this-&gt;render(&#39;job/show.html.twig&#39;, [</span>
<span class="x">            &#39;job&#39; =&gt; $job,</span>
<span class="x">        ]);</span>
<span class="x">    }</span>
<span class="x">}</span>
</pre></div>
</div>
<p>If the user comes in with the tokenized URL, we will add an admin bar at the top.
To notify template about this condition we will pass additional variable from action:</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span>  return $this-&gt;render(&#39;job/show.html.twig&#39;, [
      &#39;job&#39; =&gt; $job,
<span class="gi">+     &#39;hasControlAccess&#39; =&gt; true,</span>
  ]);
</pre></div>
</div>
<p>At the beginning of the <code class="docutils literal notranslate"><span class="pre">show.html.twig</span></code> template, include a template to host the admin bar and remove the edit link at the bottom:</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span>  {% extends &#39;base.html.twig&#39; %}
  
  {% block body %}
<span class="gi">+     {% if hasControlAccess is defined and hasControlAccess %}</span>
<span class="gi">+         {% include &#39;job/control_panel.html.twig&#39; with {&#39;job&#39;: job} %}</span>
<span class="gi">+     {% endif %}</span>

      &lt;h1&gt;Job&lt;/h1&gt;
      
      {# ... #}
      
<span class="gd">-     &lt;a class=&quot;btn btn-primary&quot; href=&quot;{{ path(&#39;job.edit&#39;, { &#39;token&#39;: job.token }) }}&quot;&gt;</span>
<span class="gd">-         &lt;span class=&quot;glyphicon glyphicon-pencil&quot; aria-hidden=&quot;true&quot;&gt;&lt;/span&gt;</span>
<span class="gd">-         Edit</span>
<span class="gd">-     &lt;/a&gt;</span>
      
      {# ... #}
</pre></div>
</div>
<p>Then, create the <code class="docutils literal notranslate"><span class="pre">control_panel.html.twig</span></code> template:</p>
<div class="highlight-twig notranslate"><div class="highlight"><pre><span></span><span class="x">&lt;nav class=&quot;navbar navbar-default&quot;&gt;</span>
<span class="x">    &lt;div class=&quot;container-fluid&quot;&gt;</span>
<span class="x">        &lt;div class=&quot;navbar-header&quot;&gt;</span>
<span class="x">            &lt;span class=&quot;navbar-brand&quot;&gt;Control Panel:&lt;/span&gt;</span>
<span class="x">        &lt;/div&gt;</span>

<span class="x">        &lt;div class=&quot;collapse navbar-collapse&quot;&gt;</span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">job.activated</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">                </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">job.expiresAt</span> <span class="o">&lt;</span> <span class="nv">date</span><span class="o">()</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">                    &lt;p class=&quot;navbar-text &quot;&gt;Expired&lt;/p&gt;</span>
<span class="x">                </span><span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">                    &lt;p class=&quot;navbar-text &quot;&gt;Expires in &lt;strong&gt;</span><span class="cp">{{</span> <span class="nv">job.expiresAt.diff</span><span class="o">(</span><span class="nv">date</span><span class="o">())|</span><span class="nf">date</span><span class="o">(</span><span class="s1">&#39;%a&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="x">&lt;/strong&gt; days&lt;/p&gt;</span>
<span class="x">                </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">                </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">job.expiresAt.diff</span><span class="o">(</span><span class="nv">date</span><span class="o">())|</span><span class="nf">date</span><span class="o">(</span><span class="s1">&#39;%a&#39;</span><span class="o">)</span> <span class="o">&lt;</span> <span class="m">5</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">                    &lt;a class=&quot;btn btn-default navbar-btn&quot; href=&quot;#&quot;&gt;</span>
<span class="x">                        &lt;span class=&quot;glyphicon glyphicon-refresh&quot; aria-hidden=&quot;true&quot;&gt;&lt;/span&gt;</span>
<span class="x">                        Extend (for another 30 days)</span>
<span class="x">                    &lt;/a&gt;</span>
<span class="x">                </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">                &lt;a class=&quot;btn btn-default navbar-btn&quot; href=&quot;</span><span class="cp">{{</span> <span class="nv">path</span><span class="o">(</span><span class="s1">&#39;job.edit&#39;</span><span class="o">,</span> <span class="o">{</span> <span class="s1">&#39;token&#39;</span><span class="o">:</span> <span class="nv">job.token</span> <span class="o">})</span> <span class="cp">}}</span><span class="x">&quot;&gt;</span>
<span class="x">                    &lt;span class=&quot;glyphicon glyphicon-pencil&quot; aria-hidden=&quot;true&quot;&gt;&lt;/span&gt;</span>
<span class="x">                    Edit</span>
<span class="x">                &lt;/a&gt;</span>

<span class="x">                &lt;a class=&quot;btn btn-default navbar-btn&quot; href=&quot;#&quot;&gt;</span>
<span class="x">                    &lt;span class=&quot;glyphicon glyphicon-ok&quot; aria-hidden=&quot;true&quot;&gt;&lt;/span&gt;</span>
<span class="x">                    Publish</span>
<span class="x">                &lt;/a&gt;</span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">            &lt;p class=&quot;navbar-text navbar-right&quot;&gt;</span>
<span class="x">                [Bookmark this &lt;a href=&quot;</span><span class="cp">{{</span> <span class="nv">url</span><span class="o">(</span><span class="s1">&#39;job.preview&#39;</span><span class="o">,</span> <span class="o">{</span><span class="nv">token</span><span class="o">:</span> <span class="nv">job.token</span><span class="o">})</span> <span class="cp">}}</span><span class="x">&quot;&gt;URL&lt;/a&gt; to manage this job in the future]</span>
<span class="x">            &lt;/p&gt;</span>
<span class="x">        &lt;/div&gt;</span>
<span class="x">    &lt;/div&gt;</span>
<span class="x">&lt;/nav&gt;</span>
</pre></div>
</div>
<p>There is a lot of code, but most of the code is simple to understand.</p>
<p>The admin bar displays the different actions depending on the job status:</p>
<p><img alt="Control panel: case 1" src="../_images/screenshot_10.png" /></p>
<p><img alt="Control panel: case 2" src="../_images/screenshot_11.png" /></p>
<p>We now need redirect from <code class="docutils literal notranslate"><span class="pre">create</span></code> and <code class="docutils literal notranslate"><span class="pre">edit</span></code> actions of the <code class="docutils literal notranslate"><span class="pre">JobController</span></code> to the new preview page:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">return $this-&gt;redirectToRoute(</span>
<span class="x">    &#39;job.preview&#39;,</span>
<span class="x">    [&#39;token&#39; =&gt; $job-&gt;getToken()]</span>
<span class="x">);</span>
</pre></div>
</div>
</div>
<div class="section" id="delete-job-action">
<span id="delete-job-action"></span><h2>Delete Job Action<a class="headerlink" href="#delete-job-action" title="Permalink to this headline">¶</a></h2>
<p>User, who created a job offer should be able to delete it. Create a method that will build a form with delete functionality:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">// ...</span>
<span class="x">use Symfony\Component\Form\FormInterface;</span>

<span class="x">class JobController extends AbstractController</span>
<span class="x">{</span>
<span class="x">    // ...</span>

<span class="x">    /**</span>
<span class="x">     * Creates a form to delete a job entity.</span>
<span class="x">     *</span>
<span class="x">     * @param Job $job</span>
<span class="x">     *</span>
<span class="x">     * @return FormInterface</span>
<span class="x">     */</span>
<span class="x">    private function createDeleteForm(Job $job) : FormInterface</span>
<span class="x">    {</span>
<span class="x">        return $this-&gt;createFormBuilder()</span>
<span class="x">            -&gt;setAction($this-&gt;generateUrl(&#39;job.delete&#39;, [&#39;token&#39; =&gt; $job-&gt;getToken()]))</span>
<span class="x">            -&gt;setMethod(&#39;DELETE&#39;)</span>
<span class="x">            -&gt;getForm();</span>
<span class="x">    }</span>
<span class="x">}</span>
</pre></div>
</div>
<blockquote>
<div>Notice that we built a form without creating separate class for it</div></blockquote>
<p>Call this method in <code class="docutils literal notranslate"><span class="pre">preview</span></code> and pass it to template:</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span>  public function preview(Job $job) : Response
  {
<span class="gi">+     $deleteForm = $this-&gt;createDeleteForm($job);</span>

      return $this-&gt;render(&#39;job/show.html.twig&#39;, [
          &#39;job&#39; =&gt; $job,
          &#39;hasControlAccess&#39; =&gt; true,
<span class="gi">+         &#39;deleteForm&#39; =&gt; $deleteForm-&gt;createView(),</span>
      ]);
  }
</pre></div>
</div>
<p>Transmit this variable from <code class="docutils literal notranslate"><span class="pre">show.html.twig</span></code> to <code class="docutils literal notranslate"><span class="pre">control_panel.html.twig</span></code>:</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="gd">- {% include &#39;job/control_panel.html.twig&#39; with {&#39;job&#39;: job} %}</span>
<span class="gi">+ {% include &#39;job/control_panel.html.twig&#39; with {&#39;job&#39;: job, &#39;deleteForm&#39;: deleteForm} %}</span>
</pre></div>
</div>
<p>and render a form in control panel:</p>
<div class="highlight-twig notranslate"><div class="highlight"><pre><span></span><span class="x">&lt;nav class=&quot;navbar navbar-default&quot;&gt;</span>
<span class="x">    &lt;div class=&quot;container-fluid&quot;&gt;</span>
<span class="x">        &lt;div class=&quot;navbar-header&quot;&gt;</span>
<span class="x">            &lt;span class=&quot;navbar-brand&quot;&gt;Control Panel:&lt;/span&gt;</span>
<span class="x">        &lt;/div&gt;</span>

<span class="x">        &lt;div class=&quot;collapse navbar-collapse&quot;&gt;</span>
<span class="x">            </span><span class="cp">{{</span> <span class="nv">form_start</span><span class="o">(</span><span class="nv">deleteForm</span><span class="o">,</span> <span class="o">{</span><span class="s1">&#39;attr&#39;</span><span class="o">:</span> <span class="o">{</span><span class="s1">&#39;class&#39;</span><span class="o">:</span> <span class="s1">&#39;navbar-form navbar-left&#39;</span><span class="cp">}}</span><span class="x">) }}</span>
<span class="x">                </span><span class="cp">{{</span> <span class="nv">form_widget</span><span class="o">(</span><span class="nv">deleteForm</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>

<span class="x">                &lt;button type=&quot;submit&quot; class=&quot;btn btn-default&quot; onclick=&quot;return confirm(&#39;Are you sure?&#39;)&quot;&gt;</span>
<span class="x">                    &lt;span class=&quot;glyphicon glyphicon-trash&quot; aria-hidden=&quot;true&quot;&gt;&lt;/span&gt;</span>
<span class="x">                    Delete</span>
<span class="x">                &lt;/button&gt;</span>
<span class="x">            </span><span class="cp">{{</span> <span class="nv">form_end</span><span class="o">(</span><span class="nv">deleteForm</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">            </span>
<span class="x">            </span><span class="c">{# ... #}</span><span class="x"></span>
</pre></div>
</div>
<p>This form will call <code class="docutils literal notranslate"><span class="pre">job.delete</span></code>, but we don’t have it yet. Create this action:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">// ...</span>

<span class="x">class JobController extends AbstractController</span>
<span class="x">{</span>
<span class="x">    // ...</span>

<span class="x">    /**</span>
<span class="x">     * Delete a job entity.</span>
<span class="x">     *</span>
<span class="x">     * @Route(&quot;job/{token}/delete&quot;, name=&quot;job.delete&quot;, requirements={&quot;token&quot; = &quot;\w+&quot;})</span>
<span class="x">     * @Method(&quot;DELETE&quot;)</span>
<span class="x">     *</span>
<span class="x">     * @param Request $request</span>
<span class="x">     * @param Job $job</span>
<span class="x">     * @param EntityManagerInterface $em</span>
<span class="x">     *</span>
<span class="x">     * @return Response</span>
<span class="x">     */</span>
<span class="x">    public function delete(Request $request, Job $job, EntityManagerInterface $em) : Response</span>
<span class="x">    {</span>
<span class="x">        $form = $this-&gt;createDeleteForm($job);</span>
<span class="x">        $form-&gt;handleRequest($request);</span>

<span class="x">        if ($form-&gt;isSubmitted() &amp;&amp; $form-&gt;isValid()) {</span>
<span class="x">            $em-&gt;remove($job);</span>
<span class="x">            $em-&gt;flush();</span>
<span class="x">        }</span>

<span class="x">        return $this-&gt;redirectToRoute(&#39;job.list&#39;);</span>
<span class="x">    }</span>
<span class="x">}</span>
</pre></div>
</div>
</div>
<div class="section" id="publish-job-action">
<span id="publish-job-action"></span><h2>Publish Job Action<a class="headerlink" href="#publish-job-action" title="Permalink to this headline">¶</a></h2>
<p>In <code class="docutils literal notranslate"><span class="pre">The</span> <span class="pre">Preview</span> <span class="pre">Page</span></code> section was defined a link to publish the job. The link needs to be changed to point to a new publish action:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">// ...</span>

<span class="x">class JobController extends AbstractController</span>
<span class="x">{</span>
<span class="x">    // ...</span>
<span class="x">    </span>
<span class="x">    /**</span>
<span class="x">     * Publish a job entity.</span>
<span class="x">     *</span>
<span class="x">     * @Route(&quot;job/{token}/publish&quot;, name=&quot;job.publish&quot;, requirements={&quot;token&quot; = &quot;\w+&quot;})</span>
<span class="x">     * @Method(&quot;POST&quot;)</span>
<span class="x">     *</span>
<span class="x">     * @param Request $request</span>
<span class="x">     * @param Job $job</span>
<span class="x">     * @param EntityManagerInterface $em</span>
<span class="x">     *</span>
<span class="x">     * @return Response</span>
<span class="x">     */</span>
<span class="x">    public function publish(Request $request, Job $job, EntityManagerInterface $em) : Response</span>
<span class="x">    {</span>
<span class="x">        $form = $this-&gt;createPublishForm($job);</span>
<span class="x">        $form-&gt;handleRequest($request);</span>
<span class="x">    </span>
<span class="x">        if ($form-&gt;isSubmitted() &amp;&amp; $form-&gt;isValid()) {</span>
<span class="x">            $job-&gt;setActivated(true);</span>
<span class="x">    </span>
<span class="x">            $em-&gt;flush();</span>
<span class="x">    </span>
<span class="x">            $this-&gt;addFlash(&#39;notice&#39;, &#39;Your job was published&#39;);</span>
<span class="x">        }</span>
<span class="x">    </span>
<span class="x">        return $this-&gt;redirectToRoute(&#39;job.preview&#39;, [</span>
<span class="x">            &#39;token&#39; =&gt; $job-&gt;getToken(),</span>
<span class="x">        ]);</span>
<span class="x">    }</span>
<span class="x">    </span>
<span class="x"> </span>
<span class="x">    /**</span>
<span class="x">     * Creates a form to publish a job entity.</span>
<span class="x">     *</span>
<span class="x">     * @param Job $job</span>
<span class="x">     *</span>
<span class="x">     * @return FormInterface</span>
<span class="x">     */</span>
<span class="x">    private function createPublishForm(Job $job) : FormInterface</span>
<span class="x">    {</span>
<span class="x">        return $this-&gt;createFormBuilder([&#39;token&#39; =&gt; $job-&gt;getToken()])</span>
<span class="x">            -&gt;setMethod(&#39;POST&#39;)</span>
<span class="x">            -&gt;getForm();</span>
<span class="x">    }</span>
<span class="x">}</span>
</pre></div>
</div>
<p>We also need to change the <code class="docutils literal notranslate"><span class="pre">preview</span></code> action to send the publish form to the template:</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span>  public function preview(Job $job) : Response
  {
      $deleteForm = $this-&gt;createDeleteForm($job);
<span class="gi">+     $publishForm = $this-&gt;createPublishForm($job);</span>

      return $this-&gt;render(&#39;job/show.html.twig&#39;, [
          &#39;job&#39; =&gt; $job,
          &#39;hasControlAccess&#39; =&gt; true,
          &#39;deleteForm&#39; =&gt; $deleteForm-&gt;createView(),
<span class="gi">+         &#39;publishForm&#39; =&gt; $publishForm-&gt;createView(),</span>
      ]);
  }
</pre></div>
</div>
<p>And also transmit this variable from <code class="docutils literal notranslate"><span class="pre">show.html.twig</span></code> to <code class="docutils literal notranslate"><span class="pre">control_panel.html.twig</span></code>:</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="gd">- {% include &#39;job/control_panel.html.twig&#39; with {&#39;job&#39;: job, &#39;deleteForm&#39;: deleteForm} %}</span>
<span class="gi">+ {% include &#39;job/control_panel.html.twig&#39; with {</span>
<span class="gi">+     &#39;job&#39;: job,</span>
<span class="gi">+     &#39;deleteForm&#39;: deleteForm,</span>
<span class="gi">+     &#39;publishForm&#39;: publishForm</span>
<span class="gi">+ } only %}</span>
</pre></div>
</div>
<p>We can now change the link of the “Publish” link (we will use a form here, like when deleting a job, so we will have a POST request):</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="gd">- &lt;a class=&quot;btn btn-default navbar-btn&quot; href=&quot;#&quot;&gt;</span>
<span class="gd">-     &lt;span class=&quot;glyphicon glyphicon-ok&quot; aria-hidden=&quot;true&quot;&gt;&lt;/span&gt;</span>
<span class="gd">-     Publish</span>
<span class="gd">- &lt;/a&gt;</span>
<span class="gi">+ {{ form_start(publishForm, {&#39;attr&#39;: {&#39;class&#39;: &#39;navbar-form navbar-left&#39;}}) }}</span>
<span class="gi">+     {{ form_widget(publishForm) }}</span>
<span class="gi">+ </span>
<span class="gi">+     &lt;button type=&quot;submit&quot; class=&quot;btn btn-default&quot;&gt;</span>
<span class="gi">+         &lt;span class=&quot;glyphicon glyphicon-ok&quot; aria-hidden=&quot;true&quot;&gt;&lt;/span&gt;</span>
<span class="gi">+         Publish</span>
<span class="gi">+     &lt;/button&gt;</span>
<span class="gi">+ {{ form_end(deleteForm) }}</span>
</pre></div>
</div>
<p>Also you can notice that we called <code class="docutils literal notranslate"><span class="pre">addFlash</span></code> method in controller. It’s a storage for special messages.
We added message and not let’s display it in <code class="docutils literal notranslate"><span class="pre">show.html.twig</span></code>:</p>
<div class="highlight-twig notranslate"><div class="highlight"><pre><span></span><span class="x"># ...</span>

<span class="cp">{%</span> <span class="k">for</span> <span class="nv">message</span> <span class="k">in</span> <span class="nv">app.flashes</span><span class="o">(</span><span class="s1">&#39;notice&#39;</span><span class="o">)</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    &lt;div class=&quot;alert alert-success&quot; role=&quot;alert&quot;&gt;</span>
<span class="x">        </span><span class="cp">{{</span> <span class="nv">message</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">    &lt;/div&gt;</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">&lt;h1&gt;Job&lt;/h1&gt;</span>

<span class="x"># ...</span>
</pre></div>
</div>
<p>Message is deleted from storage right after displaying. That’s why after refresh it will not be shown.</p>
<p>You can now test the new publish feature in your browser.</p>
<p>But we still have something to fix. The non-activated jobs must not be accessible, which means that they must not show up on the Jobeet homepage, and must not be accessible by their URL.
We need to edit the <code class="docutils literal notranslate"><span class="pre">JobRepository</span></code> methods to add this requirement:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">// ...</span>

<span class="x">class JobRepository extends EntityRepository</span>
<span class="x">{</span>
<span class="x">    /**</span>
<span class="x">     * @param int|null $categoryId</span>
<span class="x">     *</span>
<span class="x">     * @return Job[]</span>
<span class="x">     */</span>
<span class="x">    public function findActiveJobs(int $categoryId = null)</span>
<span class="x">    {</span>
<span class="x">        $qb = $this-&gt;createQueryBuilder(&#39;j&#39;)</span>
<span class="x">            -&gt;where(&#39;j.expiresAt &gt; :date&#39;)</span>
<span class="x">            -&gt;andWhere(&#39;j.activated = :activated&#39;)</span>
<span class="x">            -&gt;setParameter(&#39;date&#39;, new \DateTime())</span>
<span class="x">            -&gt;setParameter(&#39;activated&#39;, true)</span>
<span class="x">            -&gt;orderBy(&#39;j.expiresAt&#39;, &#39;DESC&#39;);</span>

<span class="x">        if ($categoryId) {</span>
<span class="x">            $qb-&gt;andWhere(&#39;j.category = :categoryId&#39;)</span>
<span class="x">                -&gt;setParameter(&#39;categoryId&#39;, $categoryId);</span>
<span class="x">        }</span>

<span class="x">        return $qb-&gt;getQuery()-&gt;getResult();</span>
<span class="x">    }</span>

<span class="x">    /**</span>
<span class="x">     * @param int $id</span>
<span class="x">     *</span>
<span class="x">     * @throws NonUniqueResultException</span>
<span class="x">     *</span>
<span class="x">     * @return Job|null</span>
<span class="x">     */</span>
<span class="x">    public function findActiveJob(int $id) : ?Job</span>
<span class="x">    {</span>
<span class="x">        return $this-&gt;createQueryBuilder(&#39;j&#39;)</span>
<span class="x">            -&gt;where(&#39;j.id = :id&#39;)</span>
<span class="x">            -&gt;andWhere(&#39;j.expiresAt &gt; :date&#39;)</span>
<span class="x">            -&gt;andWhere(&#39;j.activated = :activated&#39;)</span>
<span class="x">            -&gt;setParameter(&#39;id&#39;, $id)</span>
<span class="x">            -&gt;setParameter(&#39;date&#39;, new \DateTime())</span>
<span class="x">            -&gt;setParameter(&#39;activated&#39;, true)</span>
<span class="x">            -&gt;getQuery()</span>
<span class="x">            -&gt;getOneOrNullResult();</span>
<span class="x">    }</span>

<span class="x">    /**</span>
<span class="x">     * @param Category $category</span>
<span class="x">     *</span>
<span class="x">     * @return AbstractQuery</span>
<span class="x">     */</span>
<span class="x">    public function getPaginatedActiveJobsByCategoryQuery(Category $category) : AbstractQuery</span>
<span class="x">    {</span>
<span class="x">        return $this-&gt;createQueryBuilder(&#39;j&#39;)</span>
<span class="x">            -&gt;where(&#39;j.category = :category&#39;)</span>
<span class="x">            -&gt;andWhere(&#39;j.expiresAt &gt; :date&#39;)</span>
<span class="x">            -&gt;andWhere(&#39;j.activated = :activated&#39;)</span>
<span class="x">            -&gt;setParameter(&#39;category&#39;, $category)</span>
<span class="x">            -&gt;setParameter(&#39;date&#39;, new \DateTime())</span>
<span class="x">            -&gt;setParameter(&#39;activated&#39;, true)</span>
<span class="x">            -&gt;getQuery();</span>
<span class="x">    }</span>
<span class="x">}</span>
</pre></div>
</div>
<p>The same for <code class="docutils literal notranslate"><span class="pre">CategoryRepository</span></code>:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">// ...</span>

<span class="x">class CategoryRepository extends EntityRepository</span>
<span class="x">{</span>
<span class="x">    /**</span>
<span class="x">     * @return Category[]</span>
<span class="x">     */</span>
<span class="x">    public function findWithActiveJobs()</span>
<span class="x">    {</span>
<span class="x">        return $this-&gt;createQueryBuilder(&#39;c&#39;)</span>
<span class="x">            -&gt;select(&#39;c&#39;)</span>
<span class="x">            -&gt;innerJoin(&#39;c.jobs&#39;, &#39;j&#39;)</span>
<span class="x">            -&gt;where(&#39;j.expiresAt &gt; :date&#39;)</span>
<span class="x">            -&gt;andWhere(&#39;j.activated = :activated&#39;)</span>
<span class="x">            -&gt;setParameter(&#39;date&#39;, new \DateTime())</span>
<span class="x">            -&gt;setParameter(&#39;activated&#39;, true)</span>
<span class="x">            -&gt;getQuery()</span>
<span class="x">            -&gt;getResult();</span>
<span class="x">    }</span>
<span class="x">}</span>
</pre></div>
</div>
<p>And <code class="docutils literal notranslate"><span class="pre">Category</span></code> entity:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">// ...</span>

<span class="x">class Category</span>
<span class="x">{</span>
<span class="x">    // ...</span>

<span class="x">    public function getActiveJobs()</span>
<span class="x">    {</span>
<span class="x">        return $this-&gt;jobs-&gt;filter(function(Job $job) {</span>
<span class="x">            return $job-&gt;getExpiresAt() &gt; new \DateTime() &amp;&amp; $job-&gt;isActivated();</span>
<span class="x">        });</span>
<span class="x">    }</span>
<span class="x">    </span>
<span class="x">    // ...</span>
<span class="x">}</span>
</pre></div>
</div>
<p>That’s all. You can test it now in your browser. All non-activated jobs have disappeared from the homepage; even if you know their URLs, they are not accessible anymore.
They are, however, accessible if one knows the job’s token URL. In that case, the job preview will show up with the admin bar.</p>
<p>That’s all for today, you can find the code here: <a class="reference external" href="https://github.com/gregurco/jobeet/tree/day8">https://github.com/gregurco/jobeet/tree/day8</a></p>
<p>See you tomorrow!</p>
</div>
<div class="section" id="additional-information">
<span id="additional-information"></span><h2>Additional information<a class="headerlink" href="#additional-information" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="https://symfony.com/doc/4.1/forms.html">Forms</a></li>
<li><a class="reference external" href="https://symfony.com/doc/4.1/components/form.html">Form Component</a></li>
<li><a class="reference external" href="https://symfony.com/doc/4.1/controller/upload_file.html">How to Upload Files</a></li>
<li><a class="reference external" href="https://symfony.com/doc/4.1/form/form_customization.html">How to Customize Form Rendering</a></li>
<li><a class="reference external" href="https://symfony.com/doc/4.1/reference/forms/types.html">Form Types Reference</a></li>
<li><a class="reference external" href="https://symfony.com/doc/4.1/components/security/secure_tools.html">Securely Generating Random Values</a></li>
<li><a class="reference external" href="https://symfony.com/doc/4.1/controller.html#flash-messages">Flash Messages</a></li>
</ul>
</div>
<div class="section" id="next-steps">
<span id="next-steps"></span><h2>Next Steps<a class="headerlink" href="#next-steps" title="Permalink to this headline">¶</a></h2>
<p>Continue this tutorial here: <a class="reference external" href="/days/day-9.md">Jobeet Day 9: Console Commands</a></p>
<p>Previous post is available here: <a class="reference external" href="/days/day-7.md">Jobeet Day 7: Playing with the Category Page</a></p>
<p>Main page is available here: <a class="reference external" href="/README.md">Symfony 4.1 Jobeet Tutorial</a></p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Vlad Gregurco.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0.0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>